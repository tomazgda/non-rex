<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <title>Elm + Websockets</title>
  <!-- loads our compiled elm.js file -->
  <script type="text/javascript" src="elm.js"></script>
</head>

<body>
  <!-- creates a div that we want our elm program to take over -->
  <div id="myapp"></div>
</body>

<!-- script to do sockets and initialise our elm program -->
<script type="text/javascript">

  // start elm application
  var app = Elm.Main.init({
      node: document.getElementById('myapp')
  })

  // create a web-socket pointing to racket web server
  var socket = new WebSocket('ws://localhost:8081/')
  
  socket.onopen = function(e) {
      alert("[open] Connection established")
      socket.send("Hello Racket!")
  }

  socket.onmessage = function(event) {
      alert(`[message] Data received from server: ${event.data}`);
  };
 
  socket.onerror = function(error) {
      alert("[error] Connection could not be established")
  }  

</script>

